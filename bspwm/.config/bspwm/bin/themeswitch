#!/usr/bin/env bash

if [[ -n $1 ]]; then
	themedir=~/.config/bspwm/themes/"$1"
else
	echo "No theme specified"
	exit 1
fi

if [[ -d "$themedir" ]]; then
	theme="$1"
else
	echo "Theme \"$1\" not found"
	exit 1
fi

themefile=$(basename $(find $themedir | grep themefile))
wallpaper=$(basename $(find $themedir | grep wallpaper))
termitefile=$(basename $(find $themedir | grep termite))

# themefile=$(basename $(find $themedir | grep themefile))
# wallpaper=$(basename $(find $themedir | grep wallpaper))
# termitefile=$(basename $(find $themedir | grep termite))

cp "$themedir/$themefile" "$themedir/../theme"
cp "$themedir/$wallpaper" "$themedir/../wallpaper"
cp "$themedir/$termitefile" ~/.config/termite/config

pkill panel
sleep 0.1
. ~/.config/bspwm/bspwmrc
killall -USR1 termite
