#!/bin/bash

# Clickable area aliases
AC='%{A:'	# start click area
AB=':}'		# end click area command
AE='%{A}'	# end click area

panel_height=30
gap=$(bspc config -d focused bottom_padding)

gettitles() {
for wintitle in $(bspc query -d focused -W); do
	echo "${AC}bspc window -f ${wintitle}${AB}[$(xtitle ${wintitle})]${AE}" | tr '\n' ' '
done
}

while true; do
	buf="%{l}"
	buf="${buf}$(gettitles)"
	echo "${buf}"
	sleep 1;
done | lemonbar -b -g x${panel_height} | sh
